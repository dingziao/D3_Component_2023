<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>D3.js Demo</title>
</head>
<body>
    <div style="text-align: center; padding-top: 2em;">
        <svg style="box-shadow:0 0 0.5em rgba(0, 0, 0, 0.2)"></svg>
    </div>
<script src="https://d3js.org/d3.v6.min.js"></script>
<script charset="utf-8">
    // 在此处写图表代码
    var dataset = [180, 80, 100, 280, 90, 90, 90]
    var svg = d3.select('svg').attr('height', 240).attr('width', 460)
    var barHeight = 200/dataset.length
    var barLength = d3.scaleLinear([0, d3.max(dataset)], [0, 400])
    var barX = d3.scaleLinear()
        .domain([0, dataset.length])
        .range([0, 200])


    var g = svg.append('g').attr('transform', 'translate(40, 20)')
    g.selectAll('rect').data(dataset).enter()
        .append('rect')
        .attr('height', barHeight-3 )
        .attr('width',  (v, i) => barLength(v) )
        .attr('x', 0)
        .attr('y', (v, i) => barX(i) )
        .attr('fill', '#9C6')
        .attr('rx', 5)

    g.selectAll('text').data(dataset).enter()
        .append('text')
        .text(v => { return v })
        .attr('x', v => { return barLength(v)-5  })
        .attr('y', (v, i) => { return barX(i)+barHeight/2 })
        .attr('fill', 'white')
        .attr('font-size', '0.7em')
        .attr('text-anchor', 'end')

    var g = svg.append('g')
        .attr('transform', 'translate(40, 20)')
 
    var axis = d3.axisTop(barLength);
    axis(g)


    var labelScale = d3.scaleBand( dataset.keys(), [0, 200])
    svg.append('g')
        .attr('transform', 'translate(40, 20)')
        .call(d3.axisLeft(labelScale))

    
</script>
</body>
</html>